<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horizon - The Ultimate Social Racing Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=Exo+2:wght@700;800;900&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body { font-family: 'Inter', sans-serif; background-color: #0c0a09; color: #e5e7eb; }
        h1, h2, h3, .font-display { font-family: 'Exo 2', sans-serif; }
        .text-gradient { background: linear-gradient(90deg, #fde047, #d97706); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-fill-color: transparent; }
        .btn-glow { box-shadow: 0 0 15px rgba(252, 211, 77, 0.4), 0 0 5px rgba(217, 119, 6, 0.6); transition: all 0.3s ease-in-out; }
        .btn-glow:hover:not(:disabled) { box-shadow: 0 0 25px rgba(252, 211, 77, 0.6), 0 0 10px rgba(217, 119, 6, 0.8); transform: translateY(-2px); }
        .btn-glow:disabled { box-shadow: none; cursor: not-allowed; background-color: #78716c; transform: translateY(0); }
        #hero-video { object-fit: cover; position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; transform: translate(-50%, -50%); z-index: -1; }
        .hero-vignette::after { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(ellipse at center, rgba(12, 10, 9, 0.2) 0%, rgba(12, 10, 9, 0.8) 80%, #0c0a09 100%); z-index: 1; }
        .reveal { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.6s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .card-glass { background: rgba(28, 25, 23, 0.6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(245, 158, 11, 0.2); }
        .loader { width: 48px; height: 48px; border: 5px solid #d4d4d8; border-bottom-color: #fde047; border-radius: 50%; display: inline-block; box-sizing: border-box; animation: rotation 1s linear infinite; }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Modal and AI Content Styles */
        #ai-modal-content h3, .loyalty-card h3 { font-size: 1.5rem; font-weight: bold; color: #fde047; margin-bottom: 0.5rem; }
        #ai-modal-content h4 { font-size: 1.25rem; font-weight: bold; color: #fcd34d; margin-top: 1rem; margin-bottom: 0.5rem; }
        #ai-modal-content ul { list-style-type: disc; margin-left: 1.5rem; }
        #ai-modal-content p { margin-bottom: 0.5rem; }

        /* Form, Booking, and Auth Page Styles */
        .time-slot { background-color: #292524; border: 1px solid #57534e; color: #e5e7eb; transition: all 0.2s ease-in-out; }
        .time-slot:hover:not(:disabled) { background-color: #44403c; border-color: #fde047; }
        .time-slot.selected { background-color: #d97706; border-color: #fde047; color: #0c0a09; font-weight: bold; }
        .time-slot:disabled { background-color: #1c1917; color: #78716c; cursor: not-allowed; }
        .form-input { background-color: #1c1917; border: 1px solid #57534e; border-radius: 0.5rem; padding: 0.75rem 1rem; width: 100%; transition: all 0.2s ease-in-out; }
        .form-input:focus { outline: none; border-color: #fde047; box-shadow: 0 0 0 2px rgba(253, 224, 71, 0.5); }
        
        /* Menu Page Styles */
        .menu-tab { transition: all 0.3s ease; border-bottom: 2px solid transparent; }
        .menu-tab.active { color: #fde047; border-bottom-color: #fde047; }
        .menu-content { display: none; }
        .menu-content.active { display: block; }
        .menu-item { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: flex-start; gap: 0.5rem 1rem; }
        .menu-item-name { color: #d4d4d8; font-weight: 600;}
        .menu-item-price { color: #fde047; white-space: nowrap; font-weight: 600;}
        .menu-item-description { font-size: 0.875rem; color: #a1a1aa; flex-basis: 100%; }
        .menu-category-title { font-family: 'Exo 2', sans-serif; font-weight: 700; font-size: 1.5rem; color: #d97706; margin-bottom: 1.5rem; margin-top: 2rem; border-bottom: 1px solid rgba(217, 119, 6, 0.3); padding-bottom: 0.5rem; }

        /* Profile & Rewards Page Styles */
        .points-display { font-size: 4rem; font-weight: 900; line-height: 1; }
        .reward-card { opacity: 0.5; }
        .reward-card.unlocked { opacity: 1; border-color: #fde047; }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- Header / Navigation -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <a href="#" class="text-3xl font-bold font-display tracking-wider nav-link" data-page="main-page">HORIZON</a>
                <nav class="hidden md:flex items-center space-x-6">
                    <a href="#" class="nav-link" data-page="experience-page">The Experience</a>
                    <a href="#" class="nav-link" data-page="menu-page">Food & Drink</a>
                    <a href="#race-formats" class="nav-link" data-page="main-page">Race Formats</a>
                    <a href="#events" class="nav-link" data-page="main-page">Events</a>
                </nav>
                <div class="hidden md:flex items-center gap-4" id="desktop-auth-buttons">
                    <!-- Auth buttons will be injected here by JS -->
                </div>
                <button id="mobile-menu-button" class="md:hidden text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-stone-900/90 backdrop-blur-sm">
            <a href="#" class="nav-link block text-center py-3 hover:bg-amber-500/20" data-page="experience-page">The Experience</a>
            <a href="#" class="nav-link block text-center py-3 hover:bg-amber-500/20" data-page="menu-page">Food & Drink</a>
            <a href="#race-formats" class="nav-link block text-center py-3 hover:bg-amber-500/20" data-page="main-page">Race Formats</a>
            <a href="#events" class="nav-link block text-center py-3 hover:bg-amber-500/20" data-page="main-page">Events</a>
            <a href="#locations" class="nav-link block text-center py-3 hover:bg-amber-500/20" data-page="main-page">Locations</a>
            <div class="p-4" id="mobile-auth-buttons">
                <!-- Mobile auth buttons will be injected here by JS -->
            </div>
        </div>
    </header>

    <!-- Main Page Content -->
    <div id="main-page">
        <main>
            <!-- Hero Section -->
            <section class="relative h-screen flex items-center justify-center text-center overflow-hidden hero-vignette">
                <div class="absolute inset-0 bg-black z-[-2]"></div>
                <video autoplay muted loop playsinline id="hero-video"><source src="https://assets.mixkit.co/videos/preview/mixkit-a-stream-of-neon-lights-on-a-highway-44099-large.mp4" type="video/mp4"></video>
                <div class="relative z-10 px-4">
                    <h1 class="text-5xl md:text-7xl lg:text-8xl font-black uppercase tracking-wider">Your Race <span class="text-gradient">Awaits</span></h1>
                    <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-gray-300">The ultimate social racing experience. Drive cutting-edge sims, enjoy premium food & virgin drinks, and compete with friends.</p>
                    <div class="mt-10">
                        <button class="nav-link bg-amber-500 text-stone-900 hover:bg-amber-400 font-bold py-4 px-10 rounded-lg btn-glow text-lg uppercase tracking-wider" data-page="booking-page">Book Your Drive</button>
                    </div>
                </div>
            </section>
            
            <!-- Race Formats Section -->
            <section id="race-formats" class="py-20 md:py-32">
                <div class="container mx-auto px-4 text-center">
                    <h2 class="text-4xl md:text-5xl font-bold reveal">Choose Your <span class="text-gradient">Challenge</span></h2>
                    <p class="mt-4 max-w-3xl mx-auto text-gray-400 reveal" style="transition-delay: 100ms;">Whether you're a strategic mastermind or a sprint specialist, we have a race format for you.</p>
                    <div class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
                        <!-- Grand Prix Layout Card -->
                        <div class="card-glass p-8 rounded-2xl reveal text-left" style="transition-delay: 200ms;">
                            <h3 class="text-3xl font-bold mb-4 text-gradient">Grand Prix Layout</h3>
                            <p class="text-gray-400 mb-4">The ultimate test of skill and strategy. This full-length simulation mirrors a real F1 race weekend.</p>
                            <ul class="space-y-2 text-gray-300">
                                <li class="flex items-center gap-3"><span class="text-amber-400 font-bold">Simulators:</span> 6</li>
                                <li class="flex items-center gap-3"><span class="text-amber-400 font-bold">Format:</span> Briefing, Practice, Qualifying & 8-Lap Race</li>
                                <li class="flex items-center gap-3"><span class="text-amber-400 font-bold">Ideal For:</span> Immersive, strategic racing</li>
                            </ul>
                        </div>
                        <!-- Sprint Layout Card -->
                        <div class="card-glass p-8 rounded-2xl reveal text-left" style="transition-delay: 300ms;">
                             <h3 class="text-3xl font-bold mb-4 text-gradient">Sprint Layout</h3>
                            <p class="text-gray-400 mb-4">Pure, high-octane action. Jump straight into a 6-lap dash for glory against your rivals.</p>
                            <ul class="space-y-2 text-gray-300">
                                <li class="flex items-center gap-3"><span class="text-amber-400 font-bold">Simulators:</span> 4</li>
                                <li class="flex items-center gap-3"><span class="text-amber-400 font-bold">Format:</span> Short 6-lap sprint races</li>
                                <li class="flex items-center gap-3"><span class="text-amber-400 font-bold">Ideal For:</span> Quick competitive challenges</li>
                            </ul>
                        </div>
                    </div>
                     <div class="mt-16 reveal card-glass p-8 rounded-2xl" style="transition-delay: 400ms;">
                        <h3 class="text-3xl font-bold text-gradient">Weekly Showdown Finale</h3>
                        <p class="mt-4 max-w-3xl mx-auto text-gray-300">Win a daily Grand Prix session to qualify for the Sunday Showdown. Compete against the week's best drivers to be crowned the Horizon Champion and get your name on the <span class="font-bold text-white">Wall of Champions!</span></p>
                    </div>
                </div>
            </section>
            
            <!-- Events Section -->
            <section id="events" class="py-20 md:py-32 bg-stone-900">
                <div class="container mx-auto px-4 text-center">
                    <div class="relative z-10 container mx-auto px-4 reveal">
                        <h2 class="text-4xl md:text-5xl font-bold">Unforgettable <span class="text-gradient">Events</span></h2>
                        <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-300">From high-stakes corporate functions to legendary birthday parties, host an event that will be talked about for years to come.</p>
                        <div class="mt-10 max-w-2xl mx-auto card-glass p-6 rounded-lg text-left">
                            <h3 class="text-2xl font-bold mb-4 text-amber-400 text-center">✨ Let Our AI Plan Your Party!</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label for="event-type" class="block text-sm font-medium text-gray-300 mb-1">Type of Event</label>
                                    <input type="text" id="event-type" placeholder="e.g., Birthday Party" class="w-full bg-stone-800 border-stone-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500">
                                </div>
                                <div>
                                    <label for="guest-count" class="block text-sm font-medium text-gray-300 mb-1">Number of Guests</label>
                                    <input type="number" id="guest-count" placeholder="e.g., 20" class="w-full bg-stone-800 border-stone-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500">
                                </div>
                            </div>
                            <button id="generate-event-btn" class="w-full bg-amber-500 text-stone-900 font-bold py-3 px-6 rounded-lg btn-glow">Generate Event Ideas & Invitation</button>
                        </div>
                    </div>
                </div>
            </section>
        
            <!-- Locations Section -->
            <section id="locations" class="py-20 md:py-32">
                <div class="container mx-auto px-4">
                    <h2 class="text-4xl md:text-5xl font-bold text-center mb-16 reveal">Find Your <span class="text-gradient">Grid</span></h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="reveal" style="transition-delay: 100ms;">
                            <div class="card-glass rounded-2xl p-6 text-center flex flex-col justify-between h-full">
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-2">Mumbai</h3>
                                    <p class="text-gray-400 mb-4">The City of Dreams awaits your racing debut.</p>
                                </div>
                                <button class="w-full mt-4 bg-amber-500/10 border border-amber-500 text-amber-500 font-bold py-2 px-4 rounded-lg hover:bg-amber-500 hover:text-stone-900 transition-colors duration-300 nav-link" data-page="booking-page">Book Now</button>
                            </div>
                        </div>
                         <div class="reveal" style="transition-delay: 200ms;">
                            <div class="card-glass rounded-2xl p-6 text-center flex flex-col justify-between h-full">
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-2">Bengaluru</h3>
                                    <p class="text-gray-400 mb-4">The tech hub's fastest track is calling your name.</p>
                                </div>
                                <button class="w-full mt-4 bg-amber-500/10 border border-amber-500 text-amber-500 font-bold py-2 px-4 rounded-lg hover:bg-amber-500 hover:text-stone-900 transition-colors duration-300 nav-link" data-page="booking-page">Book Now</button>
                            </div>
                        </div>
                         <div class="reveal" style="transition-delay: 300ms;">
                            <div class="card-glass rounded-2xl p-6 text-center flex flex-col justify-between h-full">
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-2">Noida</h3>
                                    <p class="text-gray-400 mb-4">Experience the future of racing in the NCR.</p>
                                </div>
                                <button class="w-full mt-4 bg-amber-500/10 border border-amber-500 text-amber-500 font-bold py-2 px-4 rounded-lg hover:bg-amber-500 hover:text-stone-900 transition-colors duration-300 nav-link" data-page="booking-page">Book Now</button>
                            </div>
                        </div>
                         <div class="reveal" style="transition-delay: 400ms;">
                           <div class="card-glass rounded-2xl p-6 text-center flex flex-col justify-between h-full">
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-2">Hyderabad</h3>
                                    <p class="text-gray-400 mb-4">The City of Pearls now has a diamond of a track.</p>
                                </div>
                                <button class="w-full mt-4 bg-amber-500/10 border border-amber-500 text-amber-500 font-bold py-2 px-4 rounded-lg hover:bg-amber-500 hover:text-stone-900 transition-colors duration-300 nav-link" data-page="booking-page">Book Now</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Experience Page Content -->
    <div id="experience-page" class="hidden">
        <main class="py-32 md:py-40">
            <div class="container mx-auto px-4">
                <button class="nav-link text-amber-400 hover:text-amber-200 mb-12 inline-flex items-center gap-2" data-page="main-page">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                    Back to Home
                </button>
                <div class="max-w-3xl mx-auto space-y-20 text-center">
                    <section>
                        <h2 class="text-4xl md:text-5xl font-bold mb-6">Innovation Meets <span class="text-gradient">Adrenaline</span></h2>
                        <div class="text-lg text-gray-300 leading-relaxed space-y-4 text-left md:text-center">
                           <p>At Horizon, innovation meets adrenaline. Born from the engineering minds that created the C05 Formula Student car, we've reimagined motorsport entertainment—blending the thrill of racing with next-level comfort.</p>
                           <p>Guided by the same passion that inspired the C05, Horizon fuses immersive technology and a passionate community to redefine motorsport experiences. At Horizon, you’re closer to the race than ever before—not just a spectator, but truly part of the action.</p>
                        </div>
                    </section>

                    <section>
                        <h3 class="text-3xl md:text-4xl font-bold mb-4">The Simulators</h3>
                        <p class="text-lg text-gray-300 leading-relaxed">Our space centers around state-of-the-art racing simulators with advanced 4 DOF (Degrees of Freedom) motion technology. This brings hyper-realistic track feedback, letting you feel every bump, curb, and change in elevation. Whether you’re a seasoned racer or a beginner, it's the closest you can get to the real thing.</p>
                    </section>
                    
                    <section>
                        <h3 class="text-3xl md:text-4xl font-bold mb-4">The Lounge</h3>
                        <p class="text-lg text-gray-300 leading-relaxed">Our top-notch, premium lounge is the heart of the social experience at Horizon. Relax in comfort, watch live race screenings on our big screens, and soak in a dynamic atmosphere of friendly competition. It's the perfect place to debrief after a race or plan your next on-track battle.</p>
                    </section>

                    <section>
                       <h3 class="text-3xl md:text-4xl font-bold mb-4">RC Cafeteria</h3>
                       <p class="text-lg text-gray-300 leading-relaxed">Refuel with our cloud kitchen’s energizing menu. We serve a perfectly designed selection of quick bites, refreshing drinks, and comfort food, ideal for a pit stop between races.</p>
                    </section>

                    <section>
                        <h3 class="text-3xl md:text-4xl font-bold mb-4">RC Track</h3>
                        <p class="text-lg text-gray-300 leading-relaxed">At the heart of the venue, our custom RC track delivers electrifying miniature racing. It’s a unique attraction for hobbyists, fans, and anyone looking for a different kind of racing thrill.</p>
                    </section>
                    
                    <section>
                        <h3 class="text-3xl md:text-4xl font-bold mb-4">Wear Your Passion</h3>
                        <p class="text-lg text-gray-300 leading-relaxed">We carry our C05 spirit off the track with exclusive custom apparel, collectibles, and motorsport-themed accessories. Find the perfect gear for those who live and breathe racing.</p>
                        <button class="mt-8 bg-amber-500 text-stone-900 hover:bg-amber-400 font-bold py-3 px-8 rounded-lg btn-glow text-lg">Shop Merch</button>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <!-- Auth Page Content -->
    <div id="auth-page" class="hidden">
        <main class="py-32 md:py-40">
            <div class="container mx-auto px-4 flex justify-center">
                <div class="w-full max-w-md">
                    <div id="login-view">
                        <div class="card-glass p-8 rounded-2xl"><h2 class="text-3xl font-bold text-center mb-1">Welcome <span class="text-gradient">Back</span></h2><p class="text-center text-gray-400 mb-6">Login to your account to get racing.</p><form id="login-form"><div class="space-y-4"><input type="email" id="login-email" placeholder="Email Address" class="form-input" required><input type="password" id="login-password" placeholder="Password" class="form-input" required></div><div class="mt-6"><button type="submit" class="w-full bg-amber-500 text-stone-900 font-bold py-3 px-6 rounded-lg btn-glow">Login</button></div></form><div id="login-message" class="mt-4 text-center text-red-400"></div><p class="text-center mt-6 text-sm text-gray-400">Don't have an account? <button id="show-signup-btn" class="font-semibold text-amber-400 hover:text-amber-300">Sign Up</button></p></div>
                    </div>
                    <div id="signup-view" class="hidden">
                         <div class="card-glass p-8 rounded-2xl"><h2 class="text-3xl font-bold text-center mb-1">Create Your <span class="text-gradient">Profile</span></h2><p class="text-center text-gray-400 mb-6">Join the grid! A Horizon profile unlocks your racing career.</p><form id="signup-form"><div class="space-y-4"><input type="text" id="signup-name" placeholder="Full Name" class="form-input" required><input type="email" id="signup-email" placeholder="Email Address" class="form-input" required><input type="tel" id="signup-phone" placeholder="Phone Number" class="form-input"><input type="text" onfocus="(this.type='date')" onblur="(this.type='text')" id="signup-dob" placeholder="Date of Birth" class="form-input"><input type="password" id="signup-password" placeholder="Password" class="form-input" required><input type="password" id="signup-confirm-password" placeholder="Confirm Password" class="form-input" required></div><div class="mt-6"><button type="submit" class="w-full bg-amber-500 text-stone-900 font-bold py-3 px-6 rounded-lg btn-glow">Create Account</button></div></form><div id="signup-message" class="mt-4 text-center text-red-400"></div><p class="text-center mt-6 text-sm text-gray-400">Already have an account? <button id="show-login-btn" class="font-semibold text-amber-400 hover:text-amber-300">Login</button></p></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Profile Page -->
    <div id="profile-page" class="hidden">
        <main class="py-32 md:py-40">
            <div class="container mx-auto px-4">
                 <h2 class="text-4xl md:text-5xl font-bold text-center">Your <span class="text-gradient">Driver Profile</span></h2>
                 <p class="mt-4 max-w-2xl mx-auto text-gray-400 text-center" id="profile-welcome-name">Welcome back, Racer!</p>
                 <div class="max-w-4xl mx-auto mt-12 grid md:grid-cols-3 gap-8 items-start">
                    <!-- Loyalty Points Card -->
                    <a href="#" data-page="rewards-page" class="nav-link md:col-span-1 card-glass p-8 rounded-2xl text-center flex flex-col justify-center hover:border-amber-400 transition-colors duration-300">
                        <h3 class="text-xl font-bold uppercase tracking-wider text-gray-400">Loyalty Points</h3>
                        <div id="profile-loyalty-points-display" class="points-display text-gradient my-4">0</div>
                        <p class="text-sm text-amber-400">View Rewards &rarr;</p>
                    </a>
                    <!-- User Details -->
                    <div class="md:col-span-2 card-glass p-8 rounded-2xl">
                        <h3 class="text-2xl font-bold mb-4">Account Details</h3>
                        <div class="space-y-3">
                            <div><strong class="text-amber-400">Name:</strong> <span id="profile-detail-name"></span></div>
                            <div><strong class="text-amber-400">Email:</strong> <span id="profile-detail-email"></span></div>
                            <div><strong class="text-amber-400">Phone:</strong> <span id="profile-detail-phone"></span></div>
                        </div>
                    </div>
                 </div>
            </div>
        </main>
    </div>

    <!-- REWARDS PAGE -->
    <div id="rewards-page" class="hidden">
        <main class="py-32 md:py-40">
            <div class="container mx-auto px-4">
                 <h2 class="text-4xl md:text-5xl font-bold text-center">Loyalty <span class="text-gradient">Rewards</span></h2>
                 <p class="mt-4 max-w-2xl mx-auto text-gray-400 text-center">You've earned it. Redeem your points for exclusive perks and gear.</p>
                 
                 <div class="max-w-xl mx-auto mt-12 card-glass p-8 rounded-2xl text-center">
                    <h3 class="text-xl font-bold uppercase tracking-wider text-gray-400">Your Points Balance</h3>
                    <div id="rewards-loyalty-points-display" class="points-display text-gradient my-4">0</div>
                 </div>

                 <!-- Rewards Section -->
                 <div class="max-w-5xl mx-auto mt-16">
                    <h3 class="text-3xl font-bold text-center mb-8">Redeem Your <span class="text-gradient">Rewards</span></h3>
                    <div id="rewards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Rewards injected by JS -->
                    </div>
                 </div>
            </div>
        </main>
    </div>

    <!-- Menu and Booking Pages -->
    <div id="menu-page" class="hidden">
        <main class="py-32 md:py-40"><div class="container mx-auto px-4"><button class="nav-link text-amber-400 hover:text-amber-200 mb-8 inline-flex items-center gap-2" data-page="main-page"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>Back to Home</button><section id="food-and-drink-section"><div class="text-center"><h2 class="text-4xl md:text-5xl font-bold">Fuel Your <span class="text-gradient">Victory</span></h2><p class="mt-4 max-w-3xl mx-auto text-gray-400">Our menu is engineered for flavor. From trackside snacks to celebratory feasts, every dish is a winner.</p></div><div class="max-w-5xl mx-auto mt-12"><div class="flex justify-center border-b border-stone-700 mb-8 space-x-8"><button class="menu-tab active text-2xl font-bold pb-2" data-menu="food-menu">RC Cafeteria</button><button class="menu-tab text-2xl font-bold pb-2" data-menu="drinks-menu">Starting Grid</button></div><div id="food-menu" class="menu-content active"><div class="grid md:grid-cols-2 gap-x-12 gap-y-6"></div></div><div id="drinks-menu" class="menu-content"><div class="grid md:grid-cols-2 gap-x-12 gap-y-6"></div><div class="mt-16 max-w-2xl mx-auto card-glass p-6 rounded-lg text-left"><h3 class="text-2xl font-bold mb-4 text-amber-400 text-center">✨ AI Mocktail Creator</h3><p class="text-center text-gray-300 mb-4">Can't decide? Tell us your favorite flavors and our AI will invent the perfect drink for you!</p><div class="flex gap-4 mb-4"><input type="text" id="mocktail-flavors" placeholder="e.g., spicy, sweet, fruity" class="w-full bg-stone-800 border-stone-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-amber-500"></div><button id="generate-mocktail-btn" class="w-full bg-amber-500 text-stone-900 font-bold py-3 px-6 rounded-lg btn-glow">Design My Drink</button></div></div></div></section></div></main>
    </div>
    <div id="booking-page" class="hidden">
        <main class="py-32 md:py-40"><div class="container mx-auto px-4"><button class="nav-link text-amber-400 hover:text-amber-200 mb-8 inline-flex items-center gap-2" data-page="main-page"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>Back to Home</button><h2 class="text-4xl md:text-5xl font-bold text-center">Book Your <span class="text-gradient">Simulator</span></h2><p class="mt-4 max-w-2xl mx-auto text-gray-400 text-center">Select a date, choose a time, and get ready to race. Each slot is for 1 hour of thrilling competition.</p><div class="max-w-4xl mx-auto mt-12 card-glass p-8 rounded-2xl"><form id="booking-form"><div class="mb-8"><h3 class="text-2xl font-bold mb-4"><span class="text-gradient">Step 1:</span> Select a Date</h3><input type="date" id="booking-date" class="form-input w-full md:w-1/2"></div><div class="mb-8"><h3 class="text-2xl font-bold mb-4"><span class="text-gradient">Step 2:</span> Select a Time Slot</h3><div id="time-slots-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div></div><div><h3 class="text-2xl font-bold mb-4"><span class="text-gradient">Step 3:</span> Confirm Your Details</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label for="simulator-count" class="block text-sm font-medium text-gray-300 mb-1">Number of Simulators</label><input type="number" id="simulator-count" class="form-input" value="1" min="1" max="10"></div><div><label for="booking-name" class="block text-sm font-medium text-gray-300 mb-1">Full Name</label><input type="text" id="booking-name" class="form-input" placeholder="Your Name" required></div><div class="md:col-span-2"><label for="booking-email" class="block text-sm font-medium text-gray-300 mb-1">Email Address</label><input type="email" id="booking-email" class="form-input" placeholder="your.email@example.com" required></div></div></div><div class="mt-10 text-center"><button type="submit" id="confirm-booking-btn" class="bg-amber-500 text-stone-900 font-bold py-4 px-10 rounded-lg btn-glow text-lg uppercase tracking-wider">Confirm Booking</button></div></form><div id="booking-message" class="mt-6 text-center"></div></div></div></main>
    </div>
    
    <!-- Footer and Modal -->
    <footer class="bg-stone-900/50 border-t border-amber-500/10">
        <div class="container mx-auto px-4 py-12 text-center text-gray-500">
            <p>&copy; 2024 Horizon Racing Club. All Rights Reserved.</p>
        </div>
    </footer>
    <div id="ai-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 hidden"><div class="w-full max-w-2xl bg-stone-900 border border-amber-500/20 rounded-2xl shadow-2xl p-6 relative"><button id="close-modal-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white">&times;</button><div id="ai-modal-content-wrapper"><div id="ai-modal-content" class="text-gray-300 max-h-[70vh] overflow-y-auto pr-2"></div></div></div></div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, increment, collection, query, where, getDocs, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', async () => {
            // --- Firebase Config & Init ---
            const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);

            // --- App State ---
            let currentUserProfile = null;
            const TOTAL_SIMULATORS = 10;
            const bookingState = { date: null, time: null };
            let isAuthReady = false;

            // --- Page Navigation ---
            const mainPage = document.getElementById('main-page');
            const bookingPage = document.getElementById('booking-page');
            const menuPage = document.getElementById('menu-page');
            const authPage = document.getElementById('auth-page');
            const profilePage = document.getElementById('profile-page');
            const rewardsPage = document.getElementById('rewards-page');
            const experiencePage = document.getElementById('experience-page');
            const allPages = [mainPage, bookingPage, menuPage, authPage, profilePage, rewardsPage, experiencePage];
            
            let initBookingPage;

            const togglePage = (pageId) => {
                window.scrollTo(0, 0);
                allPages.forEach(p => p.classList.add('hidden'));
                const pageToShow = document.getElementById(pageId);
                if(pageToShow) pageToShow.classList.remove('hidden');

                if (pageId === 'booking-page' && isAuthReady) {
                    initBookingPage();
                } else if (pageId === 'booking-page' && !isAuthReady) {
                    document.getElementById('time-slots-container').innerHTML = '<div class="flex justify-center col-span-full"><div class="loader"></div></div>';
                }

                if (pageId === 'profile-page') renderProfilePage();
                if (pageId === 'rewards-page') renderRewardsPage();
            };

            document.body.addEventListener('click', (e) => {
                const navLink = e.target.closest('.nav-link');
                if (navLink) {
                     e.preventDefault();
                    const pageId = navLink.dataset.page;
                    const scrollToId = navLink.getAttribute('href');

                    if (pageId !== 'main-page') {
                        togglePage(pageId);
                    } else {
                        togglePage('main-page');
                        if (scrollToId && scrollToId.startsWith('#')) {
                             setTimeout(() => {
                                document.querySelector(scrollToId)?.scrollIntoView({ behavior: 'smooth' });
                            }, 50);
                        }
                    }
                    document.getElementById('mobile-menu').classList.add('hidden');
                }
            });

            // --- Gemini API Call Helper ---
            const callGemini = async (prompt, button) => {
                const modal = document.getElementById('ai-modal');
                const modalContent = document.getElementById('ai-modal-content');
                
                modal.classList.remove('hidden');
                modalContent.innerHTML = '<div class="flex justify-center items-center h-full"><div class="loader"></div></div>';

                const originalButtonText = button.innerHTML;
                button.disabled = true;
                button.innerHTML = '<div class="loader !w-5 !h-5 !border-2 mx-auto"></div>';

                try {
                    let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                    const payload = { contents: chatHistory };
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API Error: ${response.statusText}`);
                    }
                    
                    const result = await response.json();
                    
                    if (result.candidates && result.candidates[0].content.parts[0].text) {
                        const generatedText = result.candidates[0].content.parts[0].text;
                        modalContent.innerHTML = marked.parse(generatedText);
                    } else {
                         throw new Error("No content received from API.");
                    }
                } catch(error) {
                    console.error("Gemini API Error:", error);
                    modalContent.innerHTML = `<p class="text-red-400">Sorry, we hit a red flag. The AI couldn't generate a response. Please try again later.</p>`;
                } finally {
                     button.disabled = false;
                     button.innerHTML = originalButtonText;
                }
            };
            
            // AI Features Setup
            document.getElementById('generate-event-btn').addEventListener('click', e => {
                const eventType = document.getElementById('event-type').value || "a racing-themed party";
                const guestCount = document.getElementById('guest-count').value || "a group of friends";
                const prompt = `Generate some creative event ideas and a sample invitation for ${eventType} for ${guestCount} at 'Horizon', a premium social racing arcade with advanced simulators. Make the tone exciting and exclusive. The output should be in markdown format.`;
                callGemini(prompt, e.currentTarget);
            });
            
            document.getElementById('generate-mocktail-btn').addEventListener('click', e => {
                const flavors = document.getElementById('mocktail-flavors').value || "something refreshing and cool";
                const prompt = `Create a unique, racing-themed mocktail recipe with a cool name based on these flavor profiles: ${flavors}. The recipe should be for one serving and easy for a bartender to make. Provide the name, a short description, ingredients, and instructions. Format it nicely in markdown.`;
                callGemini(prompt, e.currentTarget);
            });
            
            document.getElementById('close-modal-btn').addEventListener('click', () => {
                document.getElementById('ai-modal').classList.add('hidden');
            });

            // --- Main Page & Menu Logic ---
            document.getElementById('mobile-menu-button').addEventListener('click', () => document.getElementById('mobile-menu').classList.toggle('hidden'));
            const header = document.getElementById('header');
            window.addEventListener('scroll', () => { header.classList.toggle('bg-stone-900/80', window.scrollY > 50); header.classList.toggle('backdrop-blur-sm', window.scrollY > 50); });
            const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); }); }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

            // --- Authentication UI & Logic ---
            const desktopAuthContainer = document.getElementById('desktop-auth-buttons');
            const mobileAuthContainer = document.getElementById('mobile-auth-buttons');
            
            const updateAuthUI = (user, profile) => {
                let desktopHTML, mobileHTML;
                if (user && !user.isAnonymous) {
                    const name = profile?.name ? profile.name.split(' ')[0] : 'Racer';
                    desktopHTML = `<a href="#" class="nav-link text-gray-300 hover:text-amber-400" data-page="rewards-page">Rewards</a><a href="#" class="nav-link text-amber-400 hover:text-amber-200" data-page="profile-page">Hi, ${name}</a><button id="logout-btn-desktop" class="text-gray-300 hover:text-white text-sm">Logout</button>`;
                    mobileHTML = `<a href="#" class="nav-link block text-center py-3 text-amber-400" data-page="profile-page">View Profile</a><a href="#" class="nav-link block text-center py-3 text-gray-300" data-page="rewards-page">Rewards</a><button id="logout-btn-mobile" class="block w-full text-center bg-gray-600 text-white font-bold py-3 px-6 rounded-lg mt-2">Logout</button>`;
                } else {
                    desktopHTML = `<button class="nav-link text-gray-300 hover:text-white" data-page="auth-page">Login</button><button class="nav-link bg-amber-500 text-stone-900 font-bold py-2 px-5 rounded-lg btn-glow hover:bg-amber-400" data-page="auth-page">Sign Up</button>`;
                    mobileHTML = `<button class="nav-link block w-full text-center bg-amber-500 text-stone-900 font-bold py-3 px-6 rounded-lg btn-glow" data-page="auth-page">Login / Sign Up</button>`;
                }
                desktopAuthContainer.innerHTML = desktopHTML;
                mobileAuthContainer.innerHTML = mobileHTML;

                document.getElementById('logout-btn-desktop')?.addEventListener('click', handleLogout);
                document.getElementById('logout-btn-mobile')?.addEventListener('click', handleLogout);
            };

            const handleLogout = () => {
                signOut(auth).then(() => {
                    togglePage('main-page');
                }).catch(error => console.error("Logout Error:", error));
            };
            
            const loginView = document.getElementById('login-view');
            const signupView = document.getElementById('signup-view');
            document.getElementById('show-signup-btn').addEventListener('click', () => { loginView.classList.add('hidden'); signupView.classList.remove('hidden'); });
            document.getElementById('show-login-btn').addEventListener('click', () => { signupView.classList.add('hidden'); loginView.classList.remove('hidden'); });
            const loginForm = document.getElementById('login-form');
            const loginMessage = document.getElementById('login-message');
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                loginMessage.textContent = '';
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                try { await signInWithEmailAndPassword(auth, email, password); } 
                catch (error) { loginMessage.textContent = error.message.replace('Firebase: ', ''); }
            });

            const signupForm = document.getElementById('signup-form');
            const signupMessage = document.getElementById('signup-message');
            signupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                signupMessage.textContent = '';
                const name = document.getElementById('signup-name').value;
                const email = document.getElementById('signup-email').value;
                const phone = document.getElementById('signup-phone').value;
                const dob = document.getElementById('signup-dob').value;
                const password = document.getElementById('signup-password').value;
                const confirmPassword = document.getElementById('signup-confirm-password').value;
                if (password !== confirmPassword) { signupMessage.textContent = "Passwords do not match."; return; }
                try {
                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                    const user = userCredential.user;
                    const userDocRef = doc(db, `artifacts/${appId}/users/${user.uid}`);
                    await setDoc(userDocRef, { name, email, phone, dob, loyaltyPoints: 0, createdAt: serverTimestamp() });
                } catch (error) { signupMessage.textContent = error.message.replace('Firebase: ', ''); }
            });
            
            onAuthStateChanged(auth, async (user) => {
                isAuthReady = true;
                if (user && !user.isAnonymous) {
                    const userDocRef = doc(db, `artifacts/${appId}/users/${user.uid}`);
                    const docSnap = await getDoc(userDocRef);
                    currentUserProfile = docSnap.exists() ? { uid: user.uid, ...docSnap.data() } : { uid: user.uid, name: user.email, loyaltyPoints: 0 };
                    updateAuthUI(user, currentUserProfile);
                    if (!authPage.classList.contains('hidden')) { togglePage('main-page'); }
                } else {
                    currentUserProfile = user ? { uid: user.uid, isAnonymous: true } : null;
                    updateAuthUI(null, null);
                }
                if (!bookingPage.classList.contains('hidden')) initBookingPage();
            });
            
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else if (!auth.currentUser) {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Initial sign-in failed:", error);
            }

            // --- Profile & Rewards Page Logic ---
            const renderProfilePage = () => {
                if (!currentUserProfile || currentUserProfile.isAnonymous) { togglePage('auth-page'); return; }
                document.getElementById('profile-welcome-name').textContent = `Welcome back, ${currentUserProfile.name}!`;
                document.getElementById('profile-loyalty-points-display').textContent = currentUserProfile.loyaltyPoints || 0;
                document.getElementById('profile-detail-name').textContent = currentUserProfile.name || 'N/A';
                document.getElementById('profile-detail-email').textContent = currentUserProfile.email || 'N/A';
                document.getElementById('profile-detail-phone').textContent = currentUserProfile.phone || 'N/A';
            };

            const renderRewardsPage = () => {
                if (!currentUserProfile || currentUserProfile.isAnonymous) { togglePage('auth-page'); return; }
                document.getElementById('rewards-loyalty-points-display').textContent = currentUserProfile.loyaltyPoints || 0;
                renderRewardsList();
            }

            const renderRewardsList = () => {
                const rewards = [ { name: 'Free Mocktail', points: 100, icon: '🍹' }, { name: 'Horizon Keychain', points: 250, icon: '🔑' }, { name: '30 Min Bonus Sim Time', points: 500, icon: '⏱️' }, { name: 'Horizon T-Shirt', points: 750, icon: '👕' }, { name: 'VIP Race Event Entry', points: 1500, icon: '🏆' }, { name: 'Private Sim Party (1hr)', points: 2500, icon: '🎉' } ];
                const container = document.getElementById('rewards-container');
                container.innerHTML = '';
                const currentPoints = currentUserProfile.loyaltyPoints || 0;
                rewards.forEach(reward => {
                    const unlocked = currentPoints >= reward.points;
                    const card = document.createElement('div');
                    card.className = `reward-card card-glass p-6 rounded-2xl text-center flex flex-col items-center justify-between transition-all duration-300 ${unlocked ? 'unlocked' : ''}`;
                    card.innerHTML = `<div class="text-5xl mb-4">${reward.icon}</div><div><h4 class="text-xl font-bold">${reward.name}</h4><p class="text-gradient font-bold text-lg">${reward.points} Points</p></div><button class="w-full mt-4 bg-amber-600 text-white font-bold py-2 px-4 rounded-lg btn-glow" ${!unlocked ? 'disabled' : ''}>${unlocked ? 'Redeem' : 'Locked'}</button>`;
                    container.appendChild(card);
                });
            };

            // --- Booking Logic ---
            const dateInput = document.getElementById('booking-date');
            const timeSlotsContainer = document.getElementById('time-slots-container');
            const bookingForm = document.getElementById('booking-form');
            const simCountInput = document.getElementById('simulator-count');
            const bookingMessageEl = document.getElementById('booking-message');

            initBookingPage = () => {
                const today = new Date().toISOString().split('T')[0];
                dateInput.value = today;
                dateInput.setAttribute('min', today);
                bookingState.date = today;
                if (currentUserProfile && !currentUserProfile.isAnonymous) {
                    document.getElementById('booking-name').value = currentUserProfile.name || '';
                    document.getElementById('booking-email').value = currentUserProfile.email || '';
                } else {
                     document.getElementById('booking-name').value = '';
                     document.getElementById('booking-email').value = '';
                }
                updateAvailableSlots(today);
            };

            const updateAvailableSlots = async (dateStr) => {
                bookingState.date = dateStr;
                bookingState.time = null;
                timeSlotsContainer.innerHTML = '<div class="flex justify-center col-span-full"><div class="loader"></div></div>'; // show loader
                const q = query(collection(db, `artifacts/${appId}/public/data/bookings`), where("date", "==", dateStr));
                try {
                    const querySnapshot = await getDocs(q);
                    const bookingsByTime = {};
                    querySnapshot.forEach(doc => { const b = doc.data(); bookingsByTime[b.time] = (bookingsByTime[b.time] || 0) + b.simulators; });
                    renderTimeSlots(bookingsByTime);
                } catch (error) {
                    console.error("Error fetching bookings: ", error);
                    timeSlotsContainer.innerHTML = `<p class="text-red-400 col-span-full">Could not load slots. Please try again later.</p>`;
                }
            };
            
            const renderTimeSlots = (bookingsByTime) => {
                timeSlotsContainer.innerHTML = '';
                for (let hour = 11; hour <= 22; hour++) {
                    const time = `${hour.toString().padStart(2, '0')}:00`;
                    const bookedCount = bookingsByTime[time] || 0;
                    const availableCount = TOTAL_SIMULATORS - bookedCount;
                    const slotBtn = document.createElement('button');
                    slotBtn.type = 'button'; slotBtn.className = 'time-slot p-3 rounded-lg font-semibold'; slotBtn.dataset.time = time;
                    slotBtn.innerHTML = `${time}<br><span class="text-xs font-normal">${availableCount} left</span>`;
                    if (availableCount <= 0) slotBtn.disabled = true;
                    slotBtn.addEventListener('click', () => {
                        document.querySelectorAll('.time-slot.selected').forEach(s => s.classList.remove('selected'));
                        slotBtn.classList.add('selected'); bookingState.time = time;
                        simCountInput.max = availableCount;
                        if (parseInt(simCountInput.value) > availableCount) simCountInput.value = availableCount;
                    });
                    timeSlotsContainer.appendChild(slotBtn);
                }
            };

            dateInput.addEventListener('change', () => updateAvailableSlots(dateInput.value));
            
            bookingForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                bookingMessageEl.textContent = '';
                const name = document.getElementById('booking-name').value;
                const email = document.getElementById('booking-email').value;
                const simsToBook = parseInt(simCountInput.value);

                if (!currentUserProfile || currentUserProfile.isAnonymous) {
                    bookingMessageEl.innerHTML = `<p class="text-yellow-400">Please <a href="#" data-page="auth-page" class="font-bold underline nav-link">Login or Sign Up</a> to book.</p>`;
                    return;
                }
                if (!bookingState.date || !bookingState.time || !name || !email || !simsToBook) { bookingMessageEl.innerHTML = `<p class="text-red-400">Please fill all fields and select a slot.</p>`; return; }

                const btn = document.getElementById('confirm-booking-btn');
                btn.disabled = true; btn.textContent = 'Confirming...';
                try {
                    await addDoc(collection(db, `artifacts/${appId}/public/data/bookings`), { name, email, date: bookingState.date, time: bookingState.time, simulators: simsToBook, createdAt: serverTimestamp(), userId: currentUserProfile.uid });
                    const pointsToAward = simsToBook * 10;
                    const userDocRef = doc(db, `artifacts/${appId}/users/${currentUserProfile.uid}`);
                    await updateDoc(userDocRef, { loyaltyPoints: increment(pointsToAward) });
                    currentUserProfile.loyaltyPoints = (currentUserProfile.loyaltyPoints || 0) + pointsToAward;
                    bookingMessageEl.innerHTML = `<p class="text-green-400">Booking confirmed! You earned ${pointsToAward} points.</p>`;
                    bookingForm.reset(); initBookingPage();
                } catch (error) {
                    console.error("Booking Error: ", error);
                    bookingMessageEl.innerHTML = `<p class="text-red-400">Failed to confirm booking.</p>`;
                } finally {
                    btn.disabled = false; btn.textContent = 'Confirm Booking';
                }
            });
            
            // --- Menu Page Logic ---
            const foodMenuData = [
                { name: 'Apex Sliders', price: '₹350', description: 'Two juicy mini-burgers with our signature pit-stop sauce.' },
                { name: 'Subway Club Sandwhich', price: '₹400', description: 'Cheeze stuff with multiple vegetable between our freshly baked bread.' },
                { name: 'Podium Fries', price: '₹250', description: 'Loaded fries with cheese sauce, jalapenos, and crispy onions.' },
                { name: 'Grid-Start Nachos', price: '₹300', description: 'A mountain of tortilla chips with cheese, salsa, and guacamole.' },
                { name: 'Paddock Pizza Pockets', price: '₹320', description: 'Three pizza pockets with mozzarella and a zesty tomato filling.' },
                { name: 'Finish Line Fish & Chips', price: '₹450', description: 'Classic battered fish with a side of perfectly salted chips.' },
            ];
            
            const drinksMenuData = [
                { name: 'The Monza', price: '₹200', description: 'A sharp, refreshing mix of cranberry, lime, and a hint of mint.' },
                { name: 'Silverstone Splash', price: '₹220', description: 'Cooling cucumber and elderflower tonic. A British classic.' },
                { name: 'Eau Rouge Rush', price: '₹250', description: 'A fiery blend of ginger, chili, and passionfruit for the brave.' },
                { name: 'Classic Soft Drinks', price: '₹100', description: 'Coke, Diet Coke, Sprite, Fanta.' },
                { name: 'Energy Drinks', price: '₹180', description: 'Red Bull, Monster Energy.' },
                { name: 'Fresh Juices', price: '₹150', description: 'Orange, Watermelon, or Pineapple.' },
            ];

            const renderMenuItems = (data, container) => {
                container.innerHTML = data.map(item => `
                    <div class="menu-item">
                        <span class="menu-item-name">${item.name}</span>
                        <span class="menu-item-price">${item.price}</span>
                        <p class="menu-item-description">${item.description}</p>
                    </div>
                `).join('');
            };
            
            const foodMenuContainer = document.querySelector('#food-menu .grid');
            const drinksMenuContainer = document.querySelector('#drinks-menu .grid');
            renderMenuItems(foodMenuData, foodMenuContainer);
            renderMenuItems(drinksMenuData, drinksMenuContainer);
            
            const menuTabs = document.querySelectorAll('.menu-tab');
            menuTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    menuTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    document.querySelectorAll('.menu-content').forEach(c => c.classList.remove('active'));
                    document.getElementById(tab.dataset.menu).classList.add('active');
                });
            });

            // Initial UI setup
            updateAuthUI(null, null);
        });
    </script>
</body>
</html>
